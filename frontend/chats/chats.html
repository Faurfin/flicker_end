<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0, user-scalable=yes" />
    <meta name="theme-color" content="#f5f6fb" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="format-detection" content="telephone=no" />
    <title></title>
    <link rel="stylesheet" href="/chats_static/css/base.css" />
    <link rel="stylesheet" href="/chats_static/css/responsive.css" />
    <link rel="stylesheet" href="/chats_static/css/layout.css" />
    <link rel="stylesheet" href="/chats_static/css/settings.css" />
    <link rel="stylesheet" href="/chats_static/css/profile-enhancements.css" />
    <link rel="stylesheet" href="/chats_static/chats.css" />
  </head>
  <body
    data-user-email="{{ user_email }}"
    data-user-id="{{ user_id }}"
    data-user-name="{{ username }}"
    data-user-avatar="{{ user_profile_picture }}"
    data-initial-chat-slug="{{ initial_chat_slug or '' }}"
  >
    <script>
      const API_BASE_URL = window.location.origin;
      window.CURRENT_USER_EMAIL = "{{ user_email }}";
      window.CURRENT_USER_ID = "{{ user_id }}";
    </script>

    {% macro settings_item(title, subtitle='', icon='', highlighted=false,
    show_arrow=true, is_last=false) %}
    <div
      class="settings-item {% if highlighted %}settings-item-highlighted{% endif %} {% if is_last %}settings-item-last{% endif %}"
    >
      <div class="settings-item-content">
        <div class="settings-item-left">
          {% if icon %}
          <div class="settings-item-icon">
            <img src="{{ icon }}" alt="Avatar" class="settings-avatar" />
          </div>
          {% endif %}
          <div class="settings-item-text">
            <div class="settings-item-title">{{ title }}</div>
            {% if subtitle %}
            <div class="settings-item-subtitle">{{ subtitle | safe }}</div>
            {% endif %}
          </div>
        </div>
        {% if show_arrow %}
        <div class="settings-item-arrow">
          <img src="/images/chevron-left.svg" alt="Arrow" />
        </div>
        {% endif %}
      </div>
      <div class="settings-item-divider"></div>
    </div>
    {% endmacro %}

    <div class="container">
      <div class="app">
        <aside class="sidebar">
          <nav class="menu">
            <div class="menu-top">
              <button
                class="nav-button active"
                id="chatsButton"
                data-tab="chats"
              >
                <div class="nav-icon-container">
                  <img src="/images/message-circle-white.svg" alt="–ß–∞—Ç—ã" />
                </div>
                <span>–ß–∞—Ç—ã</span>
              </button>
              <button class="nav-button" id="channelsButton">
                <div class="nav-icon-container">
                  <img src="/images/smiley-happy.svg" alt="–ö–∞–Ω–∞–ª—ã" />
                </div>
                <span>–ö–∞–Ω–∞–ª—ã</span>
              </button>
              <button class="nav-button" id="groupsButton">
                <div class="nav-icon-container">
                  <img src="/images/grops.svg" alt="–ì—Ä—É–ø–ø—ã" />
                </div>
                <span>–ì—Ä—É–ø–ø—ã</span>
              </button>
              <button class="nav-button" id="botsButton">
                <div class="nav-icon-container">
                  <img src="/images/stars.svg" alt="–ë–æ—Ç—ã" />
                </div>
                <span>–ë–æ—Ç—ã</span>
              </button>
            </div>
            <ul class="nav"></ul>
            <div class="menu-bottom">
              <button class="nav-button" id="contactsButton" data-tab="contacts">
                <div class="nav-icon-container">
                  <img src="/images/user-profile-circle.svg" alt="–ö–æ–Ω—Ç–∞–∫—Ç—ã" />
                </div>
                <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
              </button>
              <button class="nav-button" id="callsButton">
                <div class="nav-icon-container">
                  <img src="/images/phone.svg" alt="–ó–≤–æ–Ω–∫–∏" />
                </div>
                <span>–ó–≤–æ–Ω–∫–∏</span>
              </button>
              <button
                class="nav-button"
                id="settingsButton"
                data-tab="settings"
              >
                <div class="nav-icon-container">
                  <img src="/images/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏.svg" alt="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" />
                </div>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
              </button>
            </div>
          </nav>
        </aside>

        <aside class="chat-list" id="chatListSection">
          <div class="search">
            <form
              action="/"
              method="GET"
              class="search-form"
              id="searchForm"
            >
              <input
                type="text"
                name="search_query"
                placeholder="–ü–æ–∏—Å–∫..."
                value="{{ current_search_query or '' }}"
                id="searchInput"
                class="search-input"
              />
              <button type="submit" class="search-submit-btn">
                <img
                  src="/images/search-01.svg"
                  alt="–ü–æ–∏—Å–∫"
                  class="search-icon"
                />
              </button>
              <button
                id="searchClearBtn"
                class="search-clear-btn hidden"
                type="button"
                aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫"
              >
                <!-- –ö—Ä–µ—Å—Ç–∏–∫ -->
                &times;
              </button>
            </form>
          </div>

          <div
            class="message-search-results hidden"
            id="messageSearchResults"
          >
            <div class="message-search-results-header">
              –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
            </div>
            <div
              class="message-search-results-list"
              id="messageSearchResultsList"
            ></div>
            <div
              class="message-search-results-empty hidden"
              id="messageSearchResultsEmpty"
            >
              –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–≥–æ
            </div>
          </div>
          <div class="chat-list-scroll">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JS) -->
            <ul
              id="userSearchResultsUl"
              class="user-search-results"
              style="display: none"
            ></ul>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
            <ul id="chatListUl">
              {% if search_results %}
              <li class="search-results-header">
                <span>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</span>
              </li>
              {% for user in search_results %}
              <li class="search-result-item-list">
                <button
                  type="button"
                  class="view-user-profile-btn"
                  data-user-email="{{ user.email }}"
                >
                  <img
                    src="{{ user.profile_picture or '../images/—é–∑–µ—Ä.svg' }}"
                    alt="Avatar"
                  />
                  <div class="search-user-details">
                    <span class="search-user-name"
                      >{{ user.full_name or user.username }}</span
                    >
                    <span class="search-user-email">{{ user.email }}</span>
                  </div>
                </button>
              </li>
              {% endfor %} {% if not search_results and current_search_query %}
              <li class="no-results-message">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</li>
              {% endif %}
              <li class="sidebar-divider"><div class="divider-line"></div></li>
              <li><span>–í–∞—à–∏ —á–∞—Ç—ã:</span></li>
              {% endif %} {% for chat in user_chats %} {% set chat = chat %}
              <li>
                <button
                  type="button"
                  class="chat-list-item-btn"
                  data-chat-id="{{ chat.chat_id }}"
                  data-interlocutor-email="{{ chat.interlocutor_email or '' }}"
                  data-interlocutor-username="{{ chat.interlocutor_username or '' }}"
                  data-chat-name="{{ chat.chat_title }}"
                  data-contact-display-name="{{ chat.contact_display_name or '' }}"
                  data-avatar-url="{{ chat.chat_avatar or '../images/—é–∑–µ—Ä.svg' }}"
                  data-is-group-chat="{{ 'true' if chat.is_group else 'false' }}"
                  data-is-group="{{ 'true' if chat.is_group else 'false' }}"
                  data-group-name="{{ chat.group_name or '' }}"
                  data-group-owner="{{ chat.group_owner or '' }}"
                  data-is-blocked="{{ 'true' if chat.is_blocked else 'false' }}"
                  data-last-timestamp="{{ (chat.last_message_timestamp or chat.created_at).isoformat() }}"
                  data-last-sender-email="{{ chat.last_message_sender_email or '' }}"
                  data-is-online="{{ 'true' if chat.is_online else 'false' }}"
                  data-last-seen="{{ chat.last_seen or '' }}"
                  data-is-bot="{{ 'true' if chat.is_bot else 'false' }}"
                  data-is-favorite="{{ 'true' if chat.is_favorite else 'false' }}"
                >
                  <img
                    src="{{ chat.chat_avatar or '../images/—é–∑–µ—Ä.svg' }}"
                    alt="Chat Avatar"
                  />

                  {% if chat.is_online and not chat.is_bot and not chat.is_group %}
                  <div class="online-status-dot"></div>
                  {% endif %}

                  <div class="chat-info">
                    <div class="chat-name">{{ chat.contact_display_name or chat.chat_title }}</div>
                    <div
                      class="last-message {% if chat.is_typing %}typing-status{% endif %}"
                      data-chat-id="{{ chat.chat_id }}"
                      data-original-text="{{ chat.last_message_content or '–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π' }}"
                    >
                      {% if chat.is_typing %} –ü–µ—á–∞—Ç–∞–µ—Ç... {% else %} {{
                      chat.last_message_content or "–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π" }} {% endif
                      %}
                    </div>
                  </div>

                  <span class="chat-timestamp">
                    <span
                      class="chat-list-ticks"
                      data-chat-id="{{ chat.chat_id }}"
                    >
                      {% if chat.last_message_status == 'read' %}
                      <img src="/images/read.svg" alt="–ü—Ä–æ—á–∏—Ç–∞–Ω–æ" />
                      {% elif chat.last_message_status == 'sent' %}
                      <img src="/images/no_read.svg" alt="–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ" />
                      {% endif %}
                    </span>
                    <span class="chat-list-time"
                      >{{ chat.last_message_timestamp | format_time }}</span
                    >
                  </span>

                  {% if chat.unread_count | default(0) > 0 %}
                  <div class="unread-count">{{ chat.unread_count }}</div>
                  {% endif %}
                </button>
              </li>
              {% endfor %}
            </ul>
          </div>
        </aside>

        <main class="chat-empty" id="chatEmptyState">
          <div class="chat-empty__content">
            <div class="chat-empty__illustration">
              <img class="empty-chat-icon empty-chat-icon-light" src="/images/empty-chat-icon.jpg" alt="Empty chat" />
              <img class="empty-chat-icon empty-chat-icon-dark" src="/images/dark_empty_chat_icon.jfif" alt="Empty chat" />
            </div>
            <h1 class="chat-empty__title">–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</h1>
            <button
              type="button"
              class="chat-empty__button"
              id="startNewChatBtn"
            >
              <span>–ù–∞–ø–∏—Å–∞—Ç—å</span>
            </button>
          </div>
        </main>

        <main class="chat-window hidden" id="chatWindow">
          <header class="chat-header" id="chatHeaderClickable">
            <div class="chat-header-left">
              <button class="chat-header-btn back-btn" id="backToChatListBtn">
                <img src="/images/chevron-left.svg" alt="–ù–∞–∑–∞–¥" />
              </button>
              <div class="avatar-container" id="avatar-container">
                <img
                  id="currentChatAvatar"
                  src="../images/—é–∑–µ—Ä.svg"
                  alt="Chat Avatar"
                />
              </div>
              <div class="chat-info-header" id="chat-info-header">
                <h2 id="currentChatTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –ß–∞—Ç–∞</h2>
                <span id="currentChatStatus" class="chat-status-header"></span>
              </div>
            </div>

            <div class="chat-menu-container" id="chat-menu-container">
              <button class="chat-header-btn search-btn" id="chatSearchBtn">
                <img src="/images/–ª—É–ø–∞.svg" alt="–ü–æ–∏—Å–∫" />
              </button>
              <button class="chat-header-btn phone-btn" id="chatCallBtn">
                <img src="/images/phones.svg" alt="–ó–≤–æ–Ω–æ–∫" />
              </button>
              <button class="chat-header-btn menu-btn" id="menuToggleBtn">
                <img src="/images/dot-horizontal.svg" alt="Menu" />
              </button>
              <div class="chat-menu-dropdown hidden" id="chatMenuDropdown">
                <button class="chat-menu-item" id="groupSettingsMenuItem" style="display: none;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø—ã</button>
                <button class="chat-menu-item" id="clearChatMenuItem">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                <button class="chat-menu-item" id="deleteChatMenuItem">–£–¥–∞–ª–∏—Ç—å —á–∞—Ç</button>
                <button class="chat-menu-item">–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</button>
                <button class="chat-menu-item" id="blockUserBtn">
                  –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
                </button>
              </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ –≤–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞ (–æ–≤–µ—Ä–ª–µ–π –≤ —Ö–µ–¥–µ—Ä–µ) -->
            <div class="chat-search-wrapper hidden" id="chatSearchWrapper">
              <div class="chat-search-bar" id="chatSearchBar" data-state="idle">
                <button
                  type="button"
                  class="chat-search-icon-btn"
                  aria-label="–ü–æ–∏—Å–∫"
                >
                  <span class="chat-search-icon-surface">
                    <img
                      src="/images/search-01.svg"
                      alt="–ü–æ–∏—Å–∫"
                      id="chatSearchIcon"
                    />
                  </span>
                </button>
                <div class="chat-search-body">
                  <input
                    type="text"
                    id="chatSearchInput"
                    class="chat-search-input"
                    placeholder="–ù–∞–π—Ç–∏..."
                    autocomplete="off"
                  />
                  <div class="chat-search-display">
                    <span class="chat-search-count" id="chatSearchCount"></span>
                    <span
                      class="chat-search-empty-label"
                      id="chatSearchEmptyLabel"
                      >–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–≥–æ</span
                    >
                  </div>
                </div>
                <button
                  type="button"
                  class="chat-search-clear-btn hidden"
                  id="chatSearchClearBtn"
                  aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫"
                >
                  <span class="chat-search-clear-surface">
                    <img
                      src="/images/x-02-blue.svg"
                      alt="–ó–∞–∫—Ä—ã—Ç—å"
                      id="chatSearchClearIcon"
                    />
                  </span>
                </button>
              </div>
            </div>
          </header>

          <div class="chat-messages-wrapper">
            <!-- Skeleton while data/loading -->
            <div class="chat-skeleton hidden" id="chatSkeleton">
              <div class="chat-skeleton-header">
                <div class="chat-skeleton-avatar"></div>
                <div class="chat-skeleton-header-lines">
                  <div class="chat-skeleton-line long"></div>
                  <div class="chat-skeleton-line short"></div>
                </div>
              </div>
              <div class="chat-skeleton-body">
                <div class="chat-skeleton-bubble left"></div>
                <div class="chat-skeleton-bubble right"></div>
                <div class="chat-skeleton-bubble left"></div>
                <div class="chat-skeleton-bubble right small"></div>
              </div>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–Ω–∏–∑ —Å —Å—á–µ—Ç—á–∏–∫–æ–º –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <button class="scroll-to-bottom-btn hidden" id="scrollToBottomBtn" type="button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 14L12 19L17 14M7 10L12 5L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="new-messages-count hidden" id="newMessagesCount">0</span>
            </button>
          </div>

          <div class="chat-input-container" id="chat-input-container">
            <div class="reply-preview hidden" id="replyPreview">
              <div class="reply-preview-content">
                <div class="reply-preview-info" id="replyPreviewInfo"></div>
                <button
                  type="button"
                  class="reply-preview-close"
                  id="replyPreviewClose"
                >
                  √ó
                </button>
              </div>
            </div>

            <div class="attachment-menu hidden" id="attachmentMenu">
              <button
                type="button"
                class="attachment-menu-item"
                id="photoVideoBtn"
              >
                <span>–§–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ</span>
                <img src="/images/image-03.svg" alt="–§–æ—Ç–æ" />
              </button>
              <button type="button" class="attachment-menu-item" id="fileBtn">
                <span>–§–∞–π–ª</span>
                <img src="/images/file.svg" alt="–§–∞–π–ª" />
              </button>
              <button type="button" class="attachment-menu-item">
                <span>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</span>
                <img src="/images/marker-02.svg" alt="–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è" />
              </button>
              <button type="button" class="attachment-menu-item">
                <span>–ú—É–∑—ã–∫–∞</span>
                <img src="/images/note-02.svg" alt="–ú—É–∑—ã–∫–∞" />
              </button>
            </div>

            <input
              type="file"
              id="fileInput"
              accept="*/*"
              style="display: none"
            />
            <input
              type="file"
              id="imageVideoInput"
              accept="image/*,video/*"
              style="display: none"
              multiple
            />

            <!-- –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏) -->
            <div class="chat-unblock-container hidden" id="chat-unblock-container">
              <button id="unblockUserBtn" class="unblock-btn" type="button">
                –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
              </button>
            </div>

            <form id="messageForm" class="chat-input-form">
              <div class="emoji-picker hidden" id="emojiPicker">
                <div class="emoji-categories">
                  <button
                    type="button"
                    class="emoji-category-btn active"
                    data-category="smileys"
                  >
                    üòÄ
                  </button>
                  <button
                    type="button"
                    class="emoji-category-btn"
                    data-category="animals"
                  >
                    üêª
                  </button>
                  <button
                    type="button"
                    class="emoji-category-btn"
                    data-category="food"
                  >
                    üçï
                  </button>
                  <button
                    type="button"
                    class="emoji-category-btn"
                    data-category="travel"
                  >
                    üöó
                  </button>
                  <button
                    type="button"
                    class="emoji-category-btn"
                    data-category="objects"
                  >
                    üí°
                  </button>
                  <button
                    type="button"
                    class="emoji-category-btn"
                    data-category="symbols"
                  >
                    ‚ù§Ô∏è
                  </button>
                </div>
                <div class="emoji-container" id="emojiContainer"></div>
              </div>

              <button
                type="button"
                class="input-icon-btn smiley-icon"
                id="smileyIcon"
              >
                <img src="/images/smiley-happy.svg" alt="–°–º–∞–π–ª–∏–∫" />
              </button>

              <div class="chat-input-wrapper">
                <input
                  type="text"
                  id="messageInput"
                  name="message_content"
                  class="chat-input-field"
                  placeholder="–ù–∞–ø–∏—Å–∞—Ç—å..."
                  autocomplete="off"
                />
                <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è —É–ø–æ–º–∏–Ω–∞–Ω–∏–π -->
                <div class="mentions-list hidden" id="mentionsList">
                  <div class="mentions-list-content" id="mentionsListContent">
                    <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                  </div>
                </div>
              </div>

              <button
                type="button"
                class="input-icon-btn mic-icon"
                id="micIcon"
              >
                <img
                  src="/images/microphone-02.svg"
                  alt="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
                />
              </button>

              <button
                type="button"
                id="attachmentIcon"
                class="input-icon-btn attachment-icon"
              >
                <img src="/images/paperclip-01.svg" alt="–í–ª–æ–∂–µ–Ω–∏–µ" />
              </button>

              <button type="submit" id="sendButton" class="send-button hidden">
                <img src="/images/pointer-02.svg" alt="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" />
              </button>
            </form>
          </div>

          <div
            class="voice-recording-button hidden"
            id="voiceRecordingButton"
          >
            <div class="voice-recording-rectangle">
              <div class="voice-waveform-recording" id="voiceWaveformRecording">
                <!-- –ë–µ–ª–∞—è –ø–æ–ª–æ—Å–∫–∞ –≤–æ–ª–Ω—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
              </div>
              <div class="voice-timer" id="voiceTimer">00:00</div>
            </div>
            <div class="voice-recording-circle" id="voiceRecordingCircle">
              <svg width="56" height="56" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.63574 19.5071C4.12055 22.8382 5.78847 25.8834 8.33437 28.0856C10.8803 30.2878 14.1339 31.4998 17.5001 31.4998C20.8663 31.4998 24.12 30.2878 26.6659 28.0856C29.2118 25.8834 30.8797 22.8382 31.3645 19.5071M17.5021 3.49976C15.9101 3.49976 14.3833 4.13219 13.2575 5.25792C12.1318 6.38366 11.4994 7.91049 11.4994 9.50252V17.5062C11.4994 19.0982 12.1318 20.6251 13.2575 21.7508C14.3833 22.8765 15.9101 23.509 17.5021 23.509C19.0942 23.509 20.621 22.8765 21.7467 21.7508C22.8725 20.6251 23.5049 19.0982 23.5049 17.5062V9.50252C23.5049 7.91049 22.8725 6.38366 21.7467 5.25792C20.621 4.13219 19.0942 3.49976 17.5021 3.49976Z" stroke="#346AFE" stroke-width="2.91667" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>

          <div
            class="context-menu-overlay hidden"
            id="contextMenuOverlay"
          ></div>

          <div class="custom-context-menu hidden" id="messageContextMenu">
            <ul>
              <li class="context-menu-item" data-action="reply">
                <button type="button">
                  <span>–û—Ç–≤–µ—Ç–∏—Ç—å</span>
                  <div class="context-menu-icon" id="icon-reply"></div>
                </button>
              </li>
              <li class="context-menu-item" data-action="copy">
                <button type="button">
                  <span>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                  <div class="context-menu-icon" id="icon-copy"></div>
                </button>
              </li>
              <li class="context-menu-item" data-action="edit">
                <button type="button">
                  <span>–ò–∑–º–µ–Ω–∏—Ç—å</span>
                  <div class="context-menu-icon" id="icon-edit"></div>
                </button>
              </li>
              <li class="context-menu-item" data-action="pin">
                <button type="button">
                  <span>–ó–∞–∫—Ä–µ–ø–∏—Ç—å</span>
                  <div class="context-menu-icon" id="icon-pin"></div>
                </button>
              </li>
              <li class="context-menu-item" data-action="forward">
                <button type="button">
                  <span>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</span>
                  <div class="context-menu-icon" id="icon-forward"></div>
                </button>
              </li>
              <li class="context-menu-item delete" data-action="delete">
                <button type="button">
                  <span>–£–¥–∞–ª–∏—Ç—å</span>
                  <div class="context-menu-icon" id="icon-delete"></div>
                </button>
              </li>
              <li class="context-menu-item" data-action="select">
                <button type="button">
                  <span>–í—ã–±—Ä–∞—Ç—å</span>
                  <div class="context-menu-icon" id="icon-select"></div>
                </button>
              </li>
            </ul>
          </div>

          <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è -->
          <div
            class="delete-confirm-overlay hidden"
            id="deleteConfirmOverlay"
          >
            <div class="delete-confirm-modal" id="deleteConfirmModal">
              <div
                class="delete-confirm-option"
                data-delete-mode="all"
                id="deleteForAllOption"
              >
                <div class="delete-confirm-text">–£–¥–∞–ª–∏—Ç—å —É –≤—Å–µ—Ö</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>

              <div class="delete-confirm-divider"></div>

              <div
                class="delete-confirm-option"
                data-delete-mode="self"
                id="deleteForSelfOption"
              >
                <div class="delete-confirm-text">–£–¥–∞–ª–∏—Ç—å —É —Å–µ–±—è</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–∞ -->
          <div
            class="delete-confirm-overlay hidden"
            id="clearChatConfirmOverlay"
          >
            <div class="delete-confirm-modal" id="clearChatConfirmModal">
              <div
                class="delete-confirm-option"
                data-delete-mode="all"
                id="clearForAllOption"
              >
                <div class="delete-confirm-text">–û—á–∏—Å—Ç–∏—Ç—å —É –≤—Å–µ—Ö</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>

              <div class="delete-confirm-divider"></div>

              <div
                class="delete-confirm-option"
                data-delete-mode="self"
                id="clearForSelfOption"
              >
                <div class="delete-confirm-text">–û—á–∏—Å—Ç–∏—Ç—å —É —Å–µ–±—è</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Ç–∞ -->
          <div
            class="delete-confirm-overlay hidden"
            id="deleteChatConfirmOverlay"
          >
            <div class="delete-confirm-modal" id="deleteChatConfirmModal">
              <div
                class="delete-confirm-option"
                data-delete-mode="all"
                id="deleteChatForAllOption"
              >
                <div class="delete-confirm-text">–£–¥–∞–ª–∏—Ç—å —É –≤—Å–µ—Ö</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>

              <div class="delete-confirm-divider"></div>

              <div
                class="delete-confirm-option"
                data-delete-mode="self"
                id="deleteChatForSelfOption"
              >
                <div class="delete-confirm-text">–£–¥–∞–ª–∏—Ç—å —É —Å–µ–±—è</div>
                <div class="delete-confirm-icon">
                  <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 4.17647L17 4.17647M13 19H5C3.89543 19 3 18.0519 3 16.8824V5.23529C3 4.65052 3.44772 4.17647 4 4.17647H14C14.5523 4.17647 15 4.65052 15 5.23529V16.8824C15 18.0519 14.1046 19 13 19ZM7 4.17647H11C11.5523 4.17647 12 3.70242 12 3.11765V2.05882C12 1.47405 11.5523 1 11 1H7C6.44772 1 6 1.47405 6 2.05882V3.11765C6 3.70242 6.44772 4.17647 7 4.17647Z" stroke="#E46261" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </main>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ Figma) -->
        <aside class="profile-section hidden" id="profileSection">
          <div class="profile-container">
            <div class="profile-frame">
              <!-- Frame 136: Header —Å –∞–≤–∞—Ç–∞—Ä–æ–º, –∏–º–µ–Ω–µ–º, —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º –∏ "–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è!" -->
          <div class="profile-header-section">
                <div class="profile-header-background" id="profileHeaderBackground">
                  <img id="profileHeaderBgImg" src="" alt="" />
                  <button class="profile-back-btn" id="profileBackBtn">
                    <img src="/images/chevron-left.svg" alt="–ù–∞–∑–∞–¥" />
                  </button>
                </div>
                <div class="profile-header-info">
                  <h2 class="profile-name" id="profileName">–ú–∞–º–∞ ‚≠êÔ∏è</h2>
                  <p class="profile-username hidden" id="profileUsername"></p>
                  <p class="profile-email" id="profileEmail">user@example.com</p>
                  <p class="profile-quote" id="profileQuote">–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è!</p>
                </div>
              </div>

          <!-- –ë–ª–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è -->
          <section class="profile-edit-section hidden" id="profileEditSection">
            <h3 class="profile-edit-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
            <form class="profile-edit-form" id="profileEditForm">
              <div class="profile-edit-row">
                <div class="profile-edit-avatar">
                  <button
                    type="button"
                    class="profile-edit-avatar-btn"
                    id="profileAvatarEditBtn"
                  >
                    <span>–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</span>
                  </button>
                  <input
                    type="file"
                    id="profileAvatarInput"
                    accept="image/*"
                    style="display: none"
                  />
                </div>
                <div class="profile-edit-fields">
                  <label class="profile-edit-label">
                    –ò–º—è
                    <input
                      type="text"
                      id="profileEditNameInput"
                      class="profile-edit-input"
                      placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç"
                    />
                  </label>
                  <label class="profile-edit-label">
                    <span>–ù–∏–∫–Ω–µ–π–º</span>
                    <input
                      type="text"
                      id="profileEditUsernameInput"
                      class="profile-edit-input"
                      placeholder="@username"
                      autocomplete="username"
                    />
                  </label>
                  <label class="profile-edit-label">
                    Email
                    <input
                      type="email"
                      id="profileEditEmailInput"
                      class="profile-edit-input profile-edit-input--readonly"
                      placeholder="email@example.com"
                      readonly
                    />
                  </label>
                </div>
              </div>
              <label class="profile-edit-label profile-edit-label--full">
                –û —Å–µ–±–µ
                <textarea
                  id="profileEditAboutInput"
                  class="profile-edit-textarea"
                  rows="3"
                  placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ, —ç—Ç–æ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞–º"
                ></textarea>
              </label>
              <div class="profile-edit-footer">
                <span
                  class="profile-edit-status hidden"
                  id="profileEditStatus"
                ></span>
                <button
                  type="submit"
                  class="profile-edit-save-btn"
                  id="profileEditSaveBtn"
                >
                  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
              </div>
            </form>
          </section>

              <!-- Frame 151: –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
              <div class="profile-actions-section">
                <button class="profile-action-button" id="profileCallBtn">
                  <img src="/images/call.svg" alt="–ó–≤–æ–Ω–æ–∫" />
                  <span>–ó–≤–æ–Ω–æ–∫</span>
                </button>
                <button class="profile-action-button" id="profileVideoCallBtn">
                  <img src="/images/video-on.svg" alt="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫" />
                  <span>–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</span>
                </button>
                <button class="profile-action-button" id="profileMessageBtn">
                  <img src="/images/message-square.svg" alt="–°–æ–æ–±—â–µ–Ω–∏–µ" />
                  <span>–°–æ–æ–±—â–µ–Ω–∏–µ</span>
                </button>
                <button class="profile-action-button hidden" id="profileAddMemberBtn">
                  <img src="/images/user-profile-circle.svg" alt="–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞" />
                  <span>–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</span>
                </button>
                <button class="profile-action-button" id="profileGiftBtn">
                  <img src="/images/gift-01.svg" alt="–ü–æ–¥–∞—Ä–æ–∫" />
                  <span>–ü–æ–¥–∞—Ä–æ–∫</span>
                </button>
                <button class="profile-action-button profile-menu-btn" id="profileMenuBtn">
                  <img src="/images/dot-horizontal.svg" alt="–ú–µ–Ω—é" />
                </button>
              </div>

              <!-- Frame 148: –°–µ–∫—Ü–∏—è –º–µ–¥–∏–∞ -->
              <div class="profile-media-section">
                <div class="profile-media-tabs">
                  <button class="profile-media-tab active" data-tab="media">–ú–µ–¥–∏–∞</button>
                  <button class="profile-media-tab" data-tab="links">–°—Å—ã–ª–∫–∏</button>
                  <button class="profile-media-tab" data-tab="files">–§–∞–π–ª—ã</button>
                  <button class="profile-media-tab" data-tab="voice">–ì–æ–ª–æ—Å–æ–≤—ã–µ</button>
                  <button class="profile-media-tab profile-participants-tab hidden" data-tab="participants">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
                </div>
                <div class="profile-content-area" id="profileContentArea">
                  <!-- –ú–µ–¥–∏–∞/–°—Å—ã–ª–∫–∏/–§–∞–π–ª—ã/–ì–æ–ª–æ—Å–æ–≤—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
              </div>
            </div>
          </div>
        </aside>

        <div class="settings-section hidden" id="settingsSection">
          <section class="settings-container">
            <h1 class="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
            <div class="settings-list">
              <div id="myProfileSettingsItem">
                {{ settings_item(username, user_email ~ '<br />@' ~ username,
                user_profile_picture, False, True, False) }}
              </div>
              {{ settings_item('–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å', '–ü–∞—Ä–æ–ª—å, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ—á—Ç–µ', '', False, True, False) }}
              <div class="settings-item" id="appearanceSettingsItem" data-settings-type="appearance">
                <div class="settings-item-content">
                  <div class="settings-item-left">
                    <div class="settings-item-text">
                      <div class="settings-item-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div>
                      <div class="settings-item-subtitle">–û–±–æ–∏, —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∏ —Å—Ç–∏–ª—å –∏–∫–æ–Ω–æ–∫</div>
                    </div>
                  </div>
                  <div class="settings-item-arrow">
                    <img src="/images/chevron-left.svg" alt="Arrow" />
                  </div>
                </div>
                <div class="settings-item-divider"></div>
              </div>
              {{ settings_item('–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –≤–æ–ø—Ä–æ—Å—ã', '–ü–∏—à–∏—Ç–µ –Ω–∞–º –Ω–∞ –ø–æ—á—Ç—É: abcd@help.com', '', False, False, False) }}
              <div class="settings-item settings-item-danger settings-item-last" id="logoutSettingsItem" data-settings-type="logout">
                <div class="settings-item-content">
                  <div class="settings-item-left">
                    <div class="settings-item-text">
                      <div class="settings-item-title settings-item-title-danger">–í—ã–π—Ç–∏</div>
                      <div class="settings-item-subtitle settings-item-subtitle-danger">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</div>
                    </div>
                  </div>
                </div>
                <div class="settings-item-divider"></div>
              </div>
            </div>
          </section>
          <aside class="settings-info" id="settingsInfo">
            <div class="settings-info-content" id="settingsInfoContent">
              <div class="settings-info-illustration">
                <img src="/images/note-02.png" alt="Info" />
              </div>
              <div class="settings-info-text">
                –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –∫–æ—Ç—ã —á–∞—â–µ –≤—Å–µ–≥–æ –ª–µ–≤—à–∏, –Ω–µ–∂–µ–ª–∏ —á–µ–º –∫–æ—à–∫–∏
              </div>
            </div>
            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø—É—Å—Ç–æ–º –º–µ—Å—Ç–µ —Å–ø—Ä–∞–≤–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö) -->
            <div class="my-profile-panel hidden" id="myProfileSettingsPanel">
              <div class="my-profile-panel__header">
                <div class="my-profile-panel__titleblock">
                  <div class="my-profile-panel__kicker">–ü—Ä–æ—Ñ–∏–ª—å</div>
                  <h2 class="my-profile-panel__title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                </div>
                <button type="button" class="my-profile-panel__close" id="myProfileSettingsCloseBtn">
                  √ó
                </button>
              </div>

              <div class="my-profile-panel__hero">
                <div class="my-profile-panel__avatarwrap">
                  <img
                    class="my-profile-panel__avatar"
                    id="myProfileAvatarImg"
                    src="/images/—é–∑–µ—Ä.svg"
                    alt="Avatar"
                  />
                  <button type="button" class="my-profile-panel__avatarbtn" id="myProfileAvatarBtn">
                    –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ
                  </button>
                  <input type="file" id="myProfileAvatarInput" accept="image/*" style="display:none" />
                </div>

                <div class="my-profile-panel__meta">
                  <div class="my-profile-panel__name" id="myProfileDisplayName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                  <div class="my-profile-panel__email" id="myProfileEmailText">email@example.com</div>
                  <div class="my-profile-panel__chip" id="myProfileUsernameChip">@username</div>
                </div>
              </div>

              <form class="my-profile-form" id="myProfileForm">
                <div class="my-profile-grid">
                  <label class="my-profile-field">
                    <span class="my-profile-field__label">–ò–º—è</span>
                    <input type="text" class="my-profile-field__input" id="myProfileNameInput" placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç" />
                  </label>
                  <label class="my-profile-field">
                    <span class="my-profile-field__label">–ù–∏–∫–Ω–µ–π–º</span>
                    <input type="text" class="my-profile-field__input" id="myProfileUsernameInput" placeholder="@username" autocomplete="username" />
                  </label>
                  <label class="my-profile-field my-profile-field--full">
                    <span class="my-profile-field__label">Email</span>
                    <input type="email" class="my-profile-field__input my-profile-field__input--readonly" id="myProfileEmailInput" readonly />
                  </label>
                  <label class="my-profile-field my-profile-field--full">
                    <span class="my-profile-field__label">–û —Å–µ–±–µ</span>
                    <textarea class="my-profile-field__textarea" id="myProfileAboutInput" rows="4" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–∞—Ä—É —Å–ª–æ–≤ –æ —Å–µ–±–µ"></textarea>
                  </label>
                </div>

                <div class="my-profile-actions">
                  <div class="my-profile-status hidden" id="myProfileStatus"></div>
                  <button type="submit" class="my-profile-save" id="myProfileSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
              </form>
            </div>
            <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ -->
            <div class="my-profile-panel hidden" id="privacySettingsPanel">
              <div class="my-profile-panel__header">
                <div class="my-profile-panel__titleblock">
                  <div class="my-profile-panel__kicker">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                  <h2 class="my-profile-panel__title">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h2>
                </div>
                <button type="button" class="my-profile-panel__close" id="privacySettingsCloseBtn">
                  √ó
                </button>
              </div>

              <form class="my-profile-form" id="privacySettingsForm">
                <!-- –ö—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å, –∫–æ–≥–¥–∞ –≤—ã –±—ã–ª–∏ –≤ —Å–µ—Ç–∏ -->
                <div class="my-profile-field my-profile-field--full">
                  <span class="my-profile-field__label">–ö—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å, –∫–æ–≥–¥–∞ –≤—ã –±—ã–ª–∏ –≤ —Å–µ—Ç–∏</span>
                  <div class="privacy-select-wrapper">
                    <select class="my-profile-field__input" id="privacyLastSeenSelect">
                      <option value="everyone">–í—Å–µ</option>
                      <option value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</option>
                      <option value="nobody">–ù–∏–∫—Ç–æ</option>
                    </select>
                    <div class="privacy-select-custom" id="privacyLastSeenCustom">
                      <div class="privacy-select-trigger" id="privacyLastSeenTrigger">–í—Å–µ</div>
                      <div class="privacy-select-dropdown" id="privacyLastSeenDropdown">
                        <div class="privacy-select-option selected" data-value="everyone">–í—Å–µ</div>
                        <div class="privacy-select-option" data-value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</div>
                        <div class="privacy-select-option" data-value="nobody">–ù–∏–∫—Ç–æ</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- –ö—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="my-profile-field my-profile-field--full">
                  <span class="my-profile-field__label">–ö—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø—Ä–æ—Ñ–∏–ª—è</span>
                  <div class="privacy-select-wrapper">
                    <select class="my-profile-field__input" id="privacyProfilePhotoSelect">
                      <option value="everyone">–í—Å–µ</option>
                      <option value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</option>
                      <option value="nobody">–ù–∏–∫—Ç–æ</option>
                    </select>
                    <div class="privacy-select-custom" id="privacyProfilePhotoCustom">
                      <div class="privacy-select-trigger" id="privacyProfilePhotoTrigger">–í—Å–µ</div>
                      <div class="privacy-select-dropdown" id="privacyProfilePhotoDropdown">
                        <div class="privacy-select-option selected" data-value="everyone">–í—Å–µ</div>
                        <div class="privacy-select-option" data-value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</div>
                        <div class="privacy-select-option" data-value="nobody">–ù–∏–∫—Ç–æ</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–æ–ª—è -->
                <div class="my-profile-field my-profile-field--full">
                  <span class="my-profile-field__label">–ü–∞—Ä–æ–ª—å</span>
                  <div style="display: flex; gap: 8px; align-items: center;">
                    <input type="password" class="my-profile-field__input" id="privacyCurrentPassword" placeholder="–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" style="flex: 1;" />
                    <input type="password" class="my-profile-field__input" id="privacyNewPassword" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" style="flex: 1;" />
                    <button type="button" class="my-profile-save" id="privacyChangePasswordBtn" style="height: 44px; padding: 0 16px; white-space: nowrap;">–°–º–µ–Ω–∏—Ç—å</button>
                  </div>
                </div>

                <!-- Email -->
                <div class="my-profile-field my-profile-field--full">
                  <span class="my-profile-field__label">Email</span>
                  <div style="display: flex; gap: 8px; align-items: center;">
                    <input type="email" class="my-profile-field__input" id="privacyEmailInput" placeholder="email@example.com" style="flex: 1;" />
                    <button type="button" class="my-profile-save" id="privacyUpdateEmailBtn" style="height: 44px; padding: 0 16px; white-space: nowrap;">–û–±–Ω–æ–≤–∏—Ç—å</button>
                  </div>
                </div>

                <!-- –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ -->
                <div class="my-profile-field my-profile-field--full">
                  <span class="my-profile-field__label">–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫</span>
                  <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <input type="email" class="my-profile-field__input" id="privacyBlockEmailInput" placeholder="email@example.com" style="flex: 1;" />
                    <button type="button" class="my-profile-save" id="privacyBlockUserBtn" style="height: 44px; padding: 0 16px; white-space: nowrap;">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
                  </div>
                  <div id="privacyBlockedUsersList" style="display: flex; flex-direction: column; gap: 8px; max-height: 200px; overflow-y: auto; margin-top: 8px;">
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                  </div>
                </div>

                <div class="my-profile-actions">
                  <div class="my-profile-status hidden" id="privacyStatus"></div>
                  <button type="submit" class="my-profile-save" id="privacySaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
              </form>
            </div>
            <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è -->
            <div class="my-profile-panel hidden" id="appearanceSettingsPanel">
              <div class="my-profile-panel__header">
                <div class="my-profile-panel__titleblock">
                  <div class="my-profile-panel__kicker">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                  <h2 class="my-profile-panel__title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
                </div>
                <button type="button" class="my-profile-panel__close" id="appearanceSettingsCloseBtn">
                  √ó
                </button>
              </div>

              <div class="appearance-settings-content">
                <!-- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã —á–∞—Ç–æ–≤ -->
                <div class="appearance-section">
                  <div class="appearance-section-title">–¢–µ–º—ã —á–∞—Ç–æ–≤</div>
                  <div class="chat-themes-grid" id="chatThemesGrid">
                    <button type="button" class="chat-theme-card" data-theme-id="classic">
                      <div class="chat-theme-preview chat-theme-preview--classic">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–ö–ª–∞—Å—Å–∏–∫–∞</div>
                        <div class="chat-theme-desc">–°–∏–Ω–∏–µ –∞–∫—Ü–µ–Ω—Ç—ã, —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω</div>
                      </div>
                    </button>
                    <button type="button" class="chat-theme-card" data-theme-id="darkBlue">
                      <div class="chat-theme-preview chat-theme-preview--darkblue">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–¢—ë–º–Ω—ã–π —Å–∏–Ω–∏–π</div>
                        <div class="chat-theme-desc">–¢—ë–º–Ω—ã–π —Ñ–æ–Ω, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –ø—É–∑—ã—Ä–∏</div>
                      </div>
                    </button>
                    <button type="button" class="chat-theme-card" data-theme-id="mint">
                      <div class="chat-theme-preview chat-theme-preview--mint">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–ú—è—Ç–∞</div>
                        <div class="chat-theme-desc">–ú—è–≥–∫–∏–µ –∑–µ–ª—ë–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã</div>
                      </div>
                    </button>
                    <button type="button" class="chat-theme-card" data-theme-id="sunset">
                      <div class="chat-theme-preview chat-theme-preview--sunset">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–ó–∞–∫–∞—Ç</div>
                        <div class="chat-theme-desc">–¢—ë–ø–ª—ã–µ –æ—Ä–∞–Ω–∂–µ–≤–æ-—Ä–æ–∑–æ–≤—ã–µ —Ç–æ–Ω–∞</div>
                      </div>
                    </button>
                    <button type="button" class="chat-theme-card" data-theme-id="violet">
                      <div class="chat-theme-preview chat-theme-preview--violet">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π –Ω–µ–æ–Ω</div>
                        <div class="chat-theme-desc">–ì–ª—É–±–æ–∫–∏–π —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω –∏ –Ω–µ–æ–Ω–æ–≤—ã–µ –ø—É–∑—ã—Ä–∏</div>
                      </div>
                    </button>
                    <button type="button" class="chat-theme-card" data-theme-id="graphite">
                      <div class="chat-theme-preview chat-theme-preview--graphite">
                        <div class="chat-theme-bubble chat-theme-bubble--incoming"></div>
                        <div class="chat-theme-bubble chat-theme-bubble--outgoing"></div>
                      </div>
                      <div class="chat-theme-meta">
                        <div class="chat-theme-name">–ì—Ä–∞—Ñ–∏—Ç</div>
                        <div class="chat-theme-desc">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç—ë–º–Ω—ã–π, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π</div>
                      </div>
                    </button>
                  </div>

                  <!-- –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
                  <div class="appearance-section" style="margin-top: 16px;">
                    <div class="appearance-section-title">–¶–≤–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                    <div class="message-color-palette" id="messageColorPalette">
                      <button type="button" class="message-color-swatch" data-message-color="#346AFE" style="background:#346AFE;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#5B8CFF" style="background:#5B8CFF;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#37C878" style="background:#37C878;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#F97316" style="background:#F97316;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#EC4899" style="background:#EC4899;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#6366F1" style="background:#6366F1;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#0EA5E9" style="background:#0EA5E9;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#22C55E" style="background:#22C55E;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#111827" style="background:#111827;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#020617" style="background:#020617;"></button>
                      <button type="button" class="message-color-swatch" data-message-color="#000000" style="background:#000000;"></button>
                    </div>
                  </div>

                  <div class="appearance-chat-preview">
                    <div class="appearance-chat-preview-inner">
                      <div class="appearance-chat-preview-header">
                        <div class="appearance-chat-preview-avatar"></div>
                        <div class="appearance-chat-preview-text">
                          <div class="appearance-chat-preview-title">–ü—Ä–∏–º–µ—Ä —á–∞—Ç–∞</div>
                          <div class="appearance-chat-preview-status">–æ–Ω–ª–∞–π–Ω</div>
                        </div>
                      </div>
                      <div class="appearance-chat-preview-body">
                        <div class="appearance-chat-preview-row">
                          <div class="appearance-chat-preview-bubble appearance-chat-preview-bubble--incoming">
                            –ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
                          </div>
                        </div>
                        <div class="appearance-chat-preview-row appearance-chat-preview-row--outgoing">
                          <div class="appearance-chat-preview-bubble appearance-chat-preview-bubble--outgoing">
                            –ê —ç—Ç–æ –∏—Å—Ö–æ–¥—è—â–µ–µ. –í—ã–±–∏—Ä–∞–π —Ç–µ–º—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –≤—Å—ë –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Å–±—Ä–æ—Å–∞ -->
                <div class="appearance-actions">
                  <button type="button" class="my-profile-save" id="themeSaveBtn">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                  </button>
                  <button type="button" class="my-profile-save" id="themeResetBtn" style="background: var(--color-divider); color: var(--color-text-dark); box-shadow: none;">
                    –°–±—Ä–æ—Å–∏—Ç—å –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                  </button>
                </div>
              </div>
            </div>

            <!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
            <div class="logout-confirm-overlay hidden" id="logoutConfirmOverlay">
              <div class="logout-confirm-modal" id="logoutConfirmModal">
                <div class="logout-confirm-title">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?</div>
                <div class="logout-confirm-subtitle">–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?</div>
                <div class="logout-confirm-actions">
                  <button type="button" class="logout-cancel-btn" id="logoutCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                  <button type="button" class="logout-confirm-btn" id="logoutConfirmBtn">–í—ã–π—Ç–∏</button>
                </div>
              </div>
            </div>
          </aside>
        </div>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã: –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="contacts-section hidden" id="contactsSection">
          <div class="contacts-main-wrapper">
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="contacts-content-wrapper">
              <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
              <div class="contacts-header-section">
                <div class="contacts-header-row">
                  <h1 class="contacts-main-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
                  <div class="contacts-header-actions">
                    <button class="contacts-sort-btn" id="contactsSortBtn">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</button>
                    <button class="contacts-add-btn" id="openAddContactBtn">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 5V19M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      <span>–ù–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
              <div class="contacts-list-wrapper">
                <div class="contacts-empty hidden" id="contactsEmpty">
                  –ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
                </div>
                <ul class="contacts-list-main" id="contactsList"></ul>
              </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–µ–π -->
            <aside class="contacts-side-panel">
              <div class="contacts-illustration-container">
                <div class="contacts-illustration">
                  <svg width="481" height="458" viewBox="0 0 481 458" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è —á–µ–ª–æ–≤–µ–∫–∞ —Å –Ω–æ—É—Ç–±—É–∫–æ–º -->
                    <circle cx="240" cy="120" r="50" stroke="#02060F" stroke-width="2" fill="none"/>
                    <path d="M190 220 Q240 200 290 220" stroke="#02060F" stroke-width="2" fill="none"/>
                    <rect x="160" y="280" width="160" height="100" rx="8" stroke="#02060F" stroke-width="2" fill="none"/>
                    <line x1="200" y1="320" x2="280" y2="320" stroke="#02060F" stroke-width="2"/>
                    <line x1="200" y1="350" x2="280" y2="350" stroke="#02060F" stroke-width="2"/>
                  </svg>
                </div>
                <div class="contacts-side-content">
                  <p class="contacts-side-text">
                    –£ –≤–∞—Å <span id="contactsCountDisplay">25</span> –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤. –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! –ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ —Ä–æ–¥–Ω—ã—Ö –ø–æ —Å—Å—ã–ª–∫–µ:
                  </p>
                  <button class="contacts-invite-link-btn" id="contactsInviteLinkBtn">
                    (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏)
                  </button>
                </div>
              </div>
            </aside>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ -->
        <div class="modal-backdrop hidden" id="addContactModal">
          <div class="add-contact-modal">
            <div class="add-contact-header">
              <div>
                <h3>–ù–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç</h3>
                <p>–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Ñ–∞–º–∏–ª–∏—è ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é</p>
              </div>
              <button class="modal-close-btn" id="addContactCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <form id="addContactForm" class="add-contact-form">
              <label class="form-label">–ò–º—è*</label>
              <input type="text" id="contactFirstName" class="form-input" placeholder="–ò–º—è" required />
              <label class="form-label">–§–∞–º–∏–ª–∏—è</label>
              <input type="text" id="contactLastName" class="form-input" placeholder="–§–∞–º–∏–ª–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
              <label class="form-label">–ü–æ—á—Ç–∞</label>
              <input type="email" id="contactEmail" class="form-input" placeholder="example@mail.com" required />
              <div class="form-error hidden" id="addContactError"></div>
              <div class="add-contact-actions">
                <button type="button" class="secondary-btn" id="cancelAddContact">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
              </div>
            </form>
          </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –≥—Ä—É–ø–ø -->
        <div class="groups-section hidden" id="groupsSection">
          <div class="groups-main-wrapper">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø -->
            <div class="groups-content-wrapper">
              <div class="groups-header-section">
                <div class="groups-header-row">
                  <h1 class="groups-main-title">–ì—Ä—É–ø–ø—ã</h1>
                  <button class="groups-create-btn" id="openCreateGroupBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 5V19M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É</span>
                  </button>
                </div>
              </div>
              <div class="groups-list-wrapper">
                <div class="groups-empty hidden" id="groupsEmpty">
                  –ü–æ–∫–∞ –Ω–µ—Ç –≥—Ä—É–ø–ø
                </div>
                <ul class="groups-list-main" id="groupsList"></ul>
              </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –æ–∫–Ω–æ —á–∞—Ç–∞ –≥—Ä—É–ø–ø—ã -->
            <main class="groups-chat-empty" id="groupsChatEmptyState">
              <div class="chat-empty__content">
                <div class="chat-empty__illustration">
                  <img class="empty-chat-icon empty-chat-icon-light" src="/images/empty-chat-icon.jpg" alt="Empty chat" />
                  <img class="empty-chat-icon empty-chat-icon-dark" src="/images/dark_empty_chat_icon.jfif" alt="Empty chat" />
                </div>
                <h1 class="chat-empty__title">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É –¥–ª—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏</h1>
              </div>
            </main>
            
            <main class="groups-chat-window hidden" id="groupsChatWindow">
              <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ —Ö–µ–¥–µ—Ä –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —á—Ç–æ –∏ –≤ –æ–±—ã—á–Ω–æ–º —á–∞—Ç–µ -->
              <header class="chat-header" id="groupsChatHeaderClickable">
                <div class="chat-header-left">
                  <button class="chat-header-btn back-btn" id="backToGroupsListBtn">
                    <img src="/images/chevron-left.svg" alt="–ù–∞–∑–∞–¥" />
                  </button>
                  <div class="avatar-container" id="groupsAvatar-container">
                    <img
                      id="groupsCurrentChatAvatar"
                      src="../images/—é–∑–µ—Ä.svg"
                      alt="Group Avatar"
                    />
                  </div>
                  <div class="chat-info-header" id="groupsChat-info-header">
                    <h2 id="groupsCurrentChatTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –ì—Ä—É–ø–ø—ã</h2>
                    <span id="groupsCurrentChatStatus" class="chat-status-header"></span>
                  </div>
                </div>

                <div class="chat-menu-container" id="groupsChat-menu-container">
                  <button class="chat-header-btn search-btn" id="groupsChatSearchBtn">
                    <img src="/images/–ª—É–ø–∞.svg" alt="–ü–æ–∏—Å–∫" />
                  </button>
                  <button class="chat-header-btn phone-btn" id="groupsChatCallBtn">
                    <img src="/images/phones.svg" alt="–ó–≤–æ–Ω–æ–∫" />
                  </button>
                  <button class="chat-header-btn menu-btn" id="groupsMenuToggleBtn">
                    <img src="/images/dot-horizontal.svg" alt="Menu" />
                  </button>
                  <div class="chat-menu-dropdown hidden" id="groupsChatMenuDropdown">
                    <button class="chat-menu-item">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    <button class="chat-menu-item">–£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
                    <button class="chat-menu-item">–ü–æ–∫–∏–Ω—É—Ç—å –≥—Ä—É–ø–ø—É</button>
                  </div>
                </div>
              </header>

              <div class="chat-messages" id="groupsChatMessages"></div>

              <div class="chat-input-container" id="groupsChat-input-container">
                <form id="groupsMessageForm" class="chat-input-form">
                  <button
                    type="button"
                    class="input-icon-btn smiley-icon"
                    id="groupsSmileyIcon"
                  >
                    <img src="/images/smiley-happy.svg" alt="–°–º–∞–π–ª–∏–∫" />
                  </button>

                  <input
                    type="text"
                    id="groupsMessageInput"
                    name="message_content"
                    class="chat-input-field"
                    placeholder="–ù–∞–ø–∏—Å–∞—Ç—å..."
                    autocomplete="off"
                  />

                  <button
                    type="button"
                    class="input-icon-btn mic-icon"
                    id="groupsMicIcon"
                  >
                    <img
                      src="/images/microphone-02.svg"
                      alt="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
                    />
                  </button>

                  <button
                    type="button"
                    id="groupsAttachmentIcon"
                    class="input-icon-btn attachment-icon"
                  >
                    <img src="/images/paperclip-01.svg" alt="–í–ª–æ–∂–µ–Ω–∏–µ" />
                  </button>

                  <button type="submit" id="groupsSendButton" class="send-button hidden">
                    <img src="/images/pointer-02.svg" alt="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" />
                  </button>
                </form>
              </div>
            </main>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã -->
        <div class="modal-backdrop hidden" id="createGroupModal">
          <div class="create-group-modal">
            <div class="create-group-header">
              <div>
                <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É</h3>
                <p>–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
              </div>
              <button class="modal-close-btn" id="createGroupCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <form id="createGroupForm" class="create-group-form">
              <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã*</label>
              <input type="text" id="groupName" class="form-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" required />
              
              <label class="form-label">–ê–≤–∞—Ç–∞—Ä –≥—Ä—É–ø–ø—ã</label>
              <div class="group-avatar-upload">
                <input type="file" id="groupAvatarInput" accept="image/*" style="display: none" />
                <div class="group-avatar-preview" id="groupAvatarPreview">
                  <img id="groupAvatarImg" src="/images/—é–∑–µ—Ä.svg" alt="–ê–≤–∞—Ç–∞—Ä –≥—Ä—É–ø–ø—ã" />
                  <button type="button" class="group-avatar-change-btn" id="groupAvatarChangeBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                </div>
              </div>

              <label class="form-label">–£—á–∞—Å—Ç–Ω–∏–∫–∏</label>
              <div class="group-participants-section">
                <div class="group-participants-search">
                  <input type="text" id="groupParticipantSearch" class="form-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, username –∏–ª–∏ email..." />
                </div>
                <div class="group-participants-list" id="groupParticipantsList"></div>
                <div class="group-selected-participants" id="groupSelectedParticipants"></div>
              </div>
              
              <div class="form-error hidden" id="createGroupError"></div>
              <div class="create-group-actions">
                <button type="button" class="secondary-btn" id="cancelCreateGroup">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="primary-btn">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
              </div>
            </form>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä—É–ø–ø—ã -->
        <div class="modal-backdrop hidden" id="groupSettingsModal">
          <div class="group-settings-modal">
            <div class="group-settings-header">
              <div>
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø—ã</h3>
                <p id="groupSettingsSubtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≥—Ä—É–ø–ø—ã</p>
              </div>
              <button class="modal-close-btn" id="groupSettingsCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="group-settings-content" id="groupSettingsContent">
              <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
              <div class="group-settings-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã -->
        <div class="modal-backdrop hidden" id="groupParticipantsModal">
          <div class="group-settings-modal">
            <div class="group-settings-header">
              <div>
                <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã</h3>
                <p id="groupParticipantsSubtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏</p>
              </div>
              <button class="modal-close-btn" id="groupParticipantsCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="group-settings-content" id="groupParticipantsContent">
              <!-- –í–∫–ª–∞–¥–∫–∏ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–≤ -->
              <div class="group-participants-tabs">
                <button type="button" class="group-participants-tab active" data-tab="participants" id="groupParticipantsModalTab">
                  –£—á–∞—Å—Ç–Ω–∏–∫–∏
                </button>
                <button type="button" class="group-participants-tab" data-tab="admins" id="groupAdminsModalTab">
                  –ê–¥–º–∏–Ω—ã
                </button>
              </div>
              
              <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤/–∞–¥–º–∏–Ω–æ–≤ -->
              <div id="groupParticipantsModalList" class="group-participants-management-list">
                <div class="group-settings-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤...</div>
              </div>
            </div>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞ -->
        <div class="modal-backdrop hidden" id="adminRightsModal">
          <div class="group-settings-modal">
            <div class="group-settings-header">
              <div>
                <h3>–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <p id="adminRightsSubtitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
              </div>
              <button class="modal-close-btn" id="adminRightsCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="group-settings-content" id="adminRightsContent">
              <div class="group-settings-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–µ -->
        <div class="modal-backdrop hidden" id="participantInfoModal">
          <div class="group-settings-modal">
            <div class="group-settings-header">
              <div>
                <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–µ</h3>
                <p id="participantInfoSubtitle">–î–µ—Ç–∞–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≥—Ä—É–ø–ø—ã</p>
              </div>
              <button class="modal-close-btn" id="participantInfoCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="group-settings-content" id="participantInfoContent">
              <div class="group-settings-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <script type="module" src="/chats_static/js/main.js"></script>
    <script type="module" src="/chats_static/js/groups.js"></script>
  </body>
</html>
